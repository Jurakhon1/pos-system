# Исправление создания заказов в POS системе

## Проблема
Фронтенд отправлял данные заказа в неправильном формате, включая поля, которые не должны быть в `CreateOrderDto`:
- `orderNumber` - генерируется автоматически на бэкенде
- `paymentMethod` - добавляется позже через отдельный процесс
- `cashAmount`, `cardAmount`, `discountAmount`, `totalAmount` - поля оплаты

## Решение
Обновлена архитектура фронтенда для соответствия бэкенду:

### 1. Обновлены типы заказов (`src/shared/types/orders.ts`)
- `CreateOrder` теперь содержит только поля для создания базового заказа
- `CreateOrderFromCart` расширен для создания заказа с позициями
- Убраны поля оплаты из DTO создания заказа

### 2. Обновлен API заказов (`src/entities/orders/api/ordersApi.ts`)
- `createOrderFromCart` теперь делает два запроса:
  1. Создание заказа (`POST /orders`)
  2. Добавление позиций (`POST /orders/{id}/items`)
- Добавлен метод `processPayment` для обработки оплаты

### 3. Обновлен хук создания заказа (`src/features/order-creation/hooks/useOrderCreation.ts`)
- Использует правильные поля согласно `CreateOrderDto`
- Правильно маппит данные корзины в формат бэкенда

### 4. Обновлены типы корзины и продуктов
- Добавлено поле `menuItemId` для связи с бэкендом
- Обновлены интерфейсы для работы с новыми типами

## Процесс создания заказа
1. **Создание заказа**: `POST /orders` с базовыми данными
2. **Добавление позиций**: `POST /orders/{id}/items` для каждой позиции
3. **Обработка оплаты**: `POST /orders/{id}/payment` (отдельный процесс)

## Тестирование
Создан файл `test-api.js` для тестирования API заказов.

## Следующие шаги
1. Добавить получение `locationId` из контекста приложения
2. Добавить поля для ввода имени и телефона клиента
3. Реализовать процесс оплаты после создания заказа
4. Добавить валидацию на фронтенде

## Важные моменты
- Бэкенд генерирует `orderNumber` автоматически
- Поля оплаты добавляются только через процесс оплаты
- Заказ создается в статусе `pending`
- Позиции добавляются только к заказам в статусе `pending`
